<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <!-- This page is where historical weather data of a particular day can be viewed.
    It displays statistics, a graph, and the times of the day when the extreme values occurred. -->
        <meta charset="utf-8">
        <title>Weather Log History</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/weather_logs.css') }}">
        <script src="{{ url_for('static', filename='js/jquery.js') }}" charset="utf-8"></script>
    </head>

    <body>
        <!-- main header -->
        <h1>Weather Log Statistics</h1>
        <hr>
        <!-- user input date -->
        <form method='post'>
            <label for="rawdatadate">Choose a datalog to load:</label><br>
            <select name="rawdatadate">
                {% for date in dates %}
                    {% if loop.index == 10 %}
                        <option value={{ date }} selected>{{ date }}</option>
                    {% else %}
                        <option value={{ date }}>{{ date }}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <input type="submit" name="submit" value="submit">
        </form>

        <!-- main grid container -->
        <div id="completedview">
            <!-- column 1 -->
            <div id="main-col1">
                <!-- statistics section -->
                <h2>Weather Data Statistics</h2>
                <!-- temperature statistics table with dummy data -->

                {% for key, value in data.items() %}
                <h3>{{ key }}</h3>
                <div class="datastatistics">
                    <table>
                        <tr>
                            <th>mean</th>
                            <th>std</th>
                            <th>min</th>
                            <th>max</th>
                        </tr>
                        <tr>
                            <td>{{ value.mean }}</td>
                            <td>{{ value.std }}</td>
                            <td>{{ value.min }}</td>
                            <td>{{ value.max }}</td>
                        </tr>
                    </table>
                </div>
                {% endfor %}

                <!-- button field -->
                <div class="vbuttonfield">
                    <!-- button to download the data for a day as .txt -->
                    <button class="vbutton" type="button" name="txtdlbutton ">download data as .txt</button>
                    <!-- redirect back to the index page -->
                    <button class="vbutton" type="button" name="mainpagebutton" onclick="document.location.href='/index';">Back to main page</button>
                </div>
            </div>

            <!-- main column 2 -->
            <div id="main-col2">
                <!-- graph of the weather data for a day -->
                <h2>Weather Data Graph</h2>
                <div id="weathergraph" >
                    <img src="{{ url_for('static', filename='files/plots/' + plot_filename) }}" alt="weather graph">
                </div>

                <!-- extreme weather data values for the day -->
                <h2>Times of the day with minimum and maximum values</h2>
                <div id="timesdiv">
                    <!-- dummy extreme temperature times -->
                    <div class="columntimes-flex-container">
                        <div class="columntime">
                            <p>min. temperature</p>
                            <p class="time">00:00</p>
                        </div>
                        <div class="columntime">
                            <p>max. temperature</p>
                            <p class="time">12:00</p>
                        </div>
                    </div>

                    <!-- dummy extreme humidity times -->
                    <div class="columntimes-flex-container">
                        <div class="columntime">
                            <p>min. humidity</p>
                            <p class="time">00:00</p>
                        </div>
                        <div class="columntime">
                            <p>max. humidity</p>
                            <p class="time">12:00</p>
                        </div>
                    </div>

                    <!-- dummy extreme pressure times -->
                    <div class="columntimes-flex-container">
                        <div class="columntime">
                            <p>min. pressure</p>
                            <p class="time">00:00</p>
                        </div>
                        <div class="columntime">
                            <p>max. pressure</p>
                            <p class="time">12:00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- view to show on first session -->
        <div id="emptyview">
            <p class="prompt">Please select a raw data log to load from the dropdown.</p>
        </div>

        <!-- view to show when the processed data is loading -->
        <div id="loadingview">
            <p class="prompt">Generating data...</p>
        </div>

        <script src="{{ url_for('static', filename='js/log_history.js') }}" charset="utf-8"></script>
    </body>
</html>
